Tried to convert to hooks. It was not successful
